<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fact Checker</title>
    <meta name="manifest.type" content="browser_action" />
  </head>
  <body>
    <div id="app">
      <div class="popup-container">
        <header id="popup-header" class="popup-header" role="banner">
          <h1 class="popup-title">Fact Checker</h1>
          <div class="page-info">
            <span
              id="page-url"
              class="page-url"
              aria-live="polite"
              aria-label="Current page URL"
              >Loading...</span
            >
          </div>
        </header>

        <main class="popup-main" role="main">
          <div class="analyze-section">
            <button
              id="analyze-btn"
              class="analyze-button"
              type="button"
              aria-label="Analyze content on current page"
              accesskey="a"
            >
              <span class="button-text">Analyze Content</span>
            </button>
            <button
              id="analyze-highlighted-btn"
              class="analyze-button highlighted"
              type="button"
              aria-label="Analyze highlighted text"
              style="display: none"
            >
              <span class="button-text">Analyze Highlighted Text</span>
              <div
                class="loading-spinner hidden"
                id="loading-spinner"
                aria-hidden="true"
              ></div>
            </button>
            <button
              id="cancel-btn"
              class="cancel-button hidden"
              type="button"
              aria-label="Cancel analysis"
              accesskey="c"
            >
              Cancel
            </button>
            <div
              class="progress-container hidden"
              id="progress-container"
              role="progressbar"
              aria-valuemin="0"
              aria-valuemax="100"
              aria-valuenow="0"
              aria-labelledby="progress-text"
            >
              <div class="progress-bar" id="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
              </div>
              <div class="progress-text" id="progress-text" aria-live="polite">
                Initializing...
              </div>
              <div
                class="progress-time"
                id="progress-time"
                aria-label="Elapsed time"
              >
                0s
              </div>
              <div
                class="progress-stages"
                id="progress-stages"
                role="list"
                aria-label="Analysis stages"
              >
                <div
                  class="progress-stage"
                  id="stage-extract"
                  data-stage="extracting"
                  role="listitem"
                  aria-label="Extract stage"
                >
                  Extract
                </div>
                <div
                  class="progress-stage"
                  id="stage-analyze"
                  data-stage="analyzing"
                  role="listitem"
                  aria-label="Analyze stage"
                >
                  Analyze
                </div>
                <div
                  class="progress-stage"
                  id="stage-complete"
                  data-stage="complete"
                  role="listitem"
                  aria-label="Complete stage"
                >
                  Complete
                </div>
              </div>
            </div>
          </div>

          <div
            class="results-section hidden"
            id="results-section"
            aria-live="polite"
          >
            <div
              class="result-display"
              id="result-display"
              role="region"
              aria-label="Analysis results"
            >
              <!-- Results will be populated here -->
            </div>
            <div class="results-disclaimer" aria-label="Disclaimer text">
              Analysis can not replace thorough research and may contain
              mistakes.
            </div>
          </div>

          <div
            class="error-section hidden"
            id="error-section"
            aria-live="assertive"
          >
            <div class="error-message" id="error-message" role="alert">
              <div class="error-icon" aria-hidden="true">⚠️</div>
              <div class="error-content">
                <div class="error-title" id="error-title">Analysis Failed</div>
                <div class="error-description" id="error-description">
                  Unable to analyze content. Please try again.
                </div>
                <div class="error-actions">
                  <button
                    id="retry-btn"
                    class="retry-button"
                    aria-label="Try analyzing again"
                    accesskey="r"
                  >
                    Try Again
                  </button>
                  <button
                    id="help-btn"
                    class="help-button"
                    aria-label="Get help with this error"
                    accesskey="h"
                  >
                    Help
                  </button>
                </div>
              </div>
            </div>
          </div>
        </main>
        <div
          id="toast-notification"
          class="toast-notification"
          role="status"
          aria-live="polite"
        ></div>
      </div>
    </div>
    <script type="module" src="./main.ts"></script>
  </body>
  <div
    id="screen-reader-announcer"
    class="sr-only"
    aria-live="polite"
    aria-atomic="true"
    hidden
  ></div>
</html>
